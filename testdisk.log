

Sat Jul 29 18:18:22 2023
Command line: TestDisk

TestDisk 7.1, Data Recovery Utility, July 2019
Christophe GRENIER <grenier@cgsecurity.org>
https://www.cgsecurity.org
OS: Linux, kernel 5.15.0-76-generic (#83-Ubuntu SMP Thu Jun 15 19:16:32 UTC 2023) x86_64
Compiler: GCC 11.2
ext2fs lib: 1.46.5, ntfs lib: libntfs-3g, reiserfs lib: none, ewf lib: none, curses lib: ncurses 6.3
/dev/sda: LBA, LBA48 support
/dev/sda: size       500118192 sectors
/dev/sda: user_max   500118192 sectors
/dev/sdb: LBA, HPA, LBA48, DCO support
/dev/sdb: size       1953525168 sectors
/dev/sdb: user_max   1953525168 sectors
/dev/sdb: native_max 1953525168 sectors
/dev/sdb: dco        1953525168 sectors
Warning: can't get size for Disk /dev/mapper/control - 0 B - 0 sectors, sector size=512
/dev/mapper/ubuntu--vg-ubuntu--lv: LBA, LBA48 support
/dev/mapper/ubuntu--vg-ubuntu--lv: size       209715200 sectors
/dev/mapper/ubuntu--vg-ubuntu--lv: user_max   500118192 sectors
/dev/dm-0: LBA, LBA48 support
/dev/dm-0: size       209715200 sectors
/dev/dm-0: user_max   500118192 sectors
Warning: can't get size for Disk /dev/loop5 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop6 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop7 - 0 B - 0 sectors, sector size=512
Hard disk list
Disk /dev/sda - 256 GB / 238 GiB - CHS 31130 255 63, sector size=512 - Micron_1100_MTFDDAV256TBN, S/N:17261978E40D, FW:M0MA031
Disk /dev/sdb - 1000 GB / 931 GiB - CHS 121601 255 63, sector size=512 - ST1000LM035-1RK172, S/N:WL121RE8, FW:SDM4
Disk /dev/mapper/ubuntu--vg-ubuntu--lv - 107 GB / 100 GiB - 209715200 sectors, sector size=512 - Micron_1100_MTFDDAV256TBN, S/N:17261978E40D, FW:M0MA031
Disk /dev/dm-0 - 107 GB / 100 GiB - 209715200 sectors, sector size=512 - Micron_1100_MTFDDAV256TBN, S/N:17261978E40D, FW:M0MA031
Disk /dev/loop0 - 64 MB / 61 MiB - 126896 sectors (RO), sector size=512
Disk /dev/loop1 - 66 MB / 63 MiB - 129944 sectors (RO), sector size=512
Disk /dev/loop2 - 83 MB / 79 MiB - 163736 sectors (RO), sector size=512
Disk /dev/loop3 - 117 MB / 111 MiB - 229272 sectors (RO), sector size=512
Disk /dev/loop4 - 55 MB / 53 MiB - 109072 sectors (RO), sector size=512

Partition table type (auto): EFI GPT
Disk /dev/sda - 256 GB / 238 GiB - Micron_1100_MTFDDAV256TBN
Partition table type: EFI GPT

Analyse Disk /dev/sda - 256 GB / 238 GiB - CHS 31130 255 63
hdr_size=92
hdr_lba_self=1
hdr_lba_alt=500118191 (expected 500118191)
hdr_lba_start=34
hdr_lba_end=500118158
hdr_lba_table=2
hdr_entries=128
hdr_entsz=128
Current partition structure:
 1 P EFI System                  2048    2203645    2201598 [EFI System Partition]
 2 P Linux filesys. data      2203648    6397951    4194304
 3 P Linux LVM                6397952  500115455  493717504

search_part()
Disk /dev/sda - 256 GB / 238 GiB - CHS 31130 255 63
FAT32 at 0/32/33
FAT1 : 32-2183
FAT2 : 2184-4335
start_rootdir : 4336 root cluster : 2
Data : 4336-2201591
sectors : 2201598
cluster_size : 8
no_of_cluster : 274657 (2 - 274658)
fat_length 2152 calculated 2146
set_FAT_info: name from BS used

FAT32 at 0/32/33
FAT: cluster=2(0x2), pos=6384
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB

recover_EXT2: s_block_group_nr=0/16, s_mnt_count=4/4294967295, s_blocks_per_group=32768, s_inodes_per_group=8192
recover_EXT2: s_blocksize=4096
recover_EXT2: s_blocks_count 524288
recover_EXT2: part_size 4194304
Filesystem created: Thu Jul 13 12:05:41 2023
Last mount time:    Thu Jul 27 15:53:31 2023
     Linux filesys. data      2203648    6397951    4194304
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 2147 MB / 2048 MiB

LVM2 magic value at 398/64/51
part_size 493717504
     Linux LVM                6397952  500115455  493717504
     LVM2, 252 GB / 235 GiB

Results
   P EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
   P Linux filesys. data      2203648    6397951    4194304
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 2147 MB / 2048 MiB
   P Linux LVM                6397952  500115455  493717504
     LVM2, 252 GB / 235 GiB

Hint for advanced users: dmsetup may be used if you prefer to avoid rewriting the partition table for the moment:
echo "0 2201598 linear /dev/sda 2048" | dmsetup create test0
echo "0 4194304 linear /dev/sda 2203648" | dmsetup create test1
echo "0 493717504 linear /dev/sda 6397952" | dmsetup create test2

interface_write()
 1 P Linux filesys. data      2203648    6397951    4194304
 2 P Linux LVM                6397952  500115455  493717504


dir_partition inode=0
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
FAT: cluster=2(0x2), pos=6384
Directory /
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 EFI

dir_partition inode=3
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
FAT: cluster=3(0x3), pos=6392
Directory /EFI
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       0 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ubuntu
     877 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 BOOT

dir_partition inode=4
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
FAT: cluster=4(0x4), pos=6400
Directory /EFI/ubuntu
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
    4347 -rwxr-xr-x     0      0   2594696 13-Jul-2023 12:19 grubx64.efi
    4981 -rwxr-xr-x     0      0    960472 13-Jul-2023 12:19 shimx64.efi
    5216 -rwxr-xr-x     0      0    860824 13-Jul-2023 12:19 mmx64.efi
    5427 -rwxr-xr-x     0      0       108 13-Jul-2023 12:19 BOOTX64.CSV
    5428 -rwxr-xr-x     0      0       121 13-Jul-2023 12:19 grub.cfg
FAT: cluster=3(0x3), pos=6392
Directory /EFI
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       0 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ubuntu
     877 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 BOOT
FAT: cluster=2(0x2), pos=6384
Directory /
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 EFI

dir_partition inode=3
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
FAT: cluster=3(0x3), pos=6392
Directory /EFI
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       0 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ubuntu
     877 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 BOOT

dir_partition inode=4
     EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
     FAT32, blocksize=4096, 1127 MB / 1074 MiB
FAT: cluster=4(0x4), pos=6400
Directory /EFI/ubuntu
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
    4347 -rwxr-xr-x     0      0   2594696 13-Jul-2023 12:19 grubx64.efi
    4981 -rwxr-xr-x     0      0    960472 13-Jul-2023 12:19 shimx64.efi
    5216 -rwxr-xr-x     0      0    860824 13-Jul-2023 12:19 mmx64.efi
    5427 -rwxr-xr-x     0      0       108 13-Jul-2023 12:19 BOOTX64.CSV
    5428 -rwxr-xr-x     0      0       121 13-Jul-2023 12:19 grub.cfg
FAT: cluster=3(0x3), pos=6392
Directory /EFI
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 .
       0 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ..
       4 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 ubuntu
     877 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 BOOT
FAT: cluster=2(0x2), pos=6384
Directory /
       3 drwxr-xr-x     0      0         0 13-Jul-2023 12:07 EFI

   P Linux LVM                6397952  500115455  493717504
     LVM2, 252 GB / 235 GiB
Support for this filesystem hasn't been implemented.

interface_write()
 1 P EFI System                  2048    2203645    2201598 [EFI System Partition] [NO NAME]
 2 P Linux LVM                6397952  500115455  493717504
simulate write!

Interface Advanced
hdr_size=92
hdr_lba_self=1
hdr_lba_alt=500118191 (expected 500118191)
hdr_lba_start=34
hdr_lba_end=500118158
hdr_lba_table=2
hdr_entries=128
hdr_entsz=128
 1 P EFI System                  2048    2203645    2201598 [EFI System Partition]
 2 P Linux filesys. data      2203648    6397951    4194304
 3 P Linux LVM                6397952  500115455  493717504
     LVM2, 252 GB / 235 GiB


dir_partition inode=2
 2 P Linux filesys. data      2203648    6397951    4194304
Directory /
       2 drwxr-xr-x     0      0      4096 28-Jul-2023 06:22 .
       2 drwxr-xr-x     0      0      4096 28-Jul-2023 06:22 ..
      11 drwx------     0      0     16384 13-Jul-2023 12:05 lost+found
      12 drwxr-xr-x     0      0      4096 13-Jul-2023 12:06 efi
    8193 drwxr-xr-x     0      0      4096 28-Jul-2023 06:22 grub
      17 lrwxrwxrwx     0      0        28 28-Jul-2023 06:21 initrd.img.old
      33 lrwxrwxrwx     0      0        25 28-Jul-2023 06:21 vmlinuz.old
      29 lrwxrwxrwx     0      0        28 28-Jul-2023 06:21 initrd.img
      18 lrwxrwxrwx     0      0        25 28-Jul-2023 06:21 vmlinuz
      26 -rw-------     0      0   6262331 15-Jun-2023 17:47 System.map-5.15.0-76-generic
      27 -rw-r--r--     0      0    261924 15-Jun-2023 17:47 config-5.15.0-76-generic
      28 -rw-------     0      0  11589128 15-Jun-2023 18:21 vmlinuz-5.15.0-76-generic
      25 -rw-r--r--     0      0 110497047 13-Jul-2023 13:00 initrd.img-5.15.0-76-generic
      31 -rw-r--r--     0      0    261924  7-Jul-2023 13:21 config-5.15.0-78-generic
      30 -rw-------     0      0   6262331  7-Jul-2023 13:21 System.map-5.15.0-78-generic
      32 -rw-------     0      0  11586408  7-Jul-2023 13:24 vmlinuz-5.15.0-78-generic
      34 -rw-r--r--     0      0 110517440 28-Jul-2023 06:22 initrd.img-5.15.0-78-generic

TestDisk exited normally.
